<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>yield the dog</title>
  <meta name="author" content="yield the dog">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--TODO: Pull author, title, canonical from a config -->
  <link rel="canonical" href="http://yieldthedog.github.com">
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="../../blog.css">
</head>

<body>
  <div id="layout" class="pure-g">
    <div class="content pure-u">
      <div>
        <div class="posts">
          <section class="post">
            <header class="post-header">
              
              <img class="post-avatar" alt="Christoph's avatar" height="48" width="48" src="../../img/avatar_Christoph.png"-->
              
              <!-- TODO: comments -->
              <h2 class="post-title">Configure WebStorm to run and debug Mocha tests</h2>

              <p class="post-meta">
                
                By <a href="#" class="post-author">Christoph</a> under <a class="post-category post-category-" href="#"></a>
                
              </p>
            </header>

            <div class="post-description">
              <p>First of all I have to admit that I&#39;m an IDE guy. I&#39;m using command line tools, Vi , have gnu tools installed on my Windows box and so on. That brings me to the next thing I have to admit: I&#39;m using Windows.</p>
<p>I love using <a href="http://www.jetbrains.com/webstorm/">WebStorm</a> for tinkering with Node.js. I love WebStorm for two reasons:</p>
<ul>
<li>The JavaScript syntax completion is somehow crazy clever</li>
<li>It allows me to stick with my Eclipse keyboard schema</li>
</ul>
<!-- more -->
<p>The latter point is particullary important to me, since I&#39;m using Eclipse and Visual Studio in my job environment and I don&#39;t have enough brain to remember a third keyboard shortcut schema. I guess, I&#39;ll blog about that in a future post.</p>
<p>I was using <a href="https://github.com/caolan/nodeunit">Nodeunit</a> for (unit) testing, when I started with Node.js. While Nodeunit works quite fine, it&#39;s limited to TDD style tests. Some time ago when coding on <a href="http://subsonicproject.com">SubSonic</a> I began to like the endorsed test method name syntax in the project, that uses the word <em>&quot;should&quot;</em> somewhere in the test method name. That means a unit test, that was named <code>testSquareRootOfZero</code> would become <code>squareRootOfZeroShouldThrowAnException</code>. This transports more meaning than <code>testSquareRootOfZero</code>. As a side effect of this naming schema I was programming (unit) tests slick like chicken shit. For this reason and for pure curiosity I migrated some unit tests to <a href="http://visionmedia.github.com/mocha/">Mocha</a> that offers a slick BDD style syntax just out of the box.</p>
<p>But I had a slight problem with the Mocha tests in WebStorm: lack of tools support. This does not really matter for writing the tests nor for running the tests (Mocha has a wonderful console test runner!). But when tests start to fail, I want to attach a debugger! And I want to attach my WebStorm debugger with a ton of cool features!</p>
<p>So with a little bit of hand crafting and reading Mocha code it&#39;s quite easy to attach the WebStorm debugging tools to Mocha tests.</p>
<p><strong>First install Mocha</strong></p>
<pre><code>npm install mocha
</code></pre><p>You may want to install Mocha globally </p>
<pre><code>npm -g install mocha 
</code></pre><p><strong>Next attach the debugger:</strong>  </p>
<p>In WebStorm via <code>Run-&gt;Edit Configurations</code> add a new configuration and point the &quot;Path to node App JS File&quot; to <code>\_mocha</code> (can be found under node_modules in case installed locally or under global modules). Pointing the run configuration to _mocha is quite important since the main mocha binary spawns a new process you cannot connect via a debugger!</p>
<p>Et voil√† - Debugging Mocha tests in WebStorm!</p>
<p>Drawbacks: The output is somehow broken, so I&#39;m using the WebStorm runner for debugging while using the mocha console runner for pretty output and continuous tests via watch.</p>

            </div>
          </section>
        </div>
      </div>
      
      <div class="footer">
        <div class="pure-menu pure-menu-horizontal">
          <ul>
            <li class="pure-menu-item"><a href="http://purecss.io/" class="pure-menu-link">About</a></li>
            <li class="pure-menu-item"><a href="http://twitter.com/yuilibrary/" class="pure-menu-link">Twitter</a></li>
            <li class="pure-menu-item"><a href="http://github.com/yahoo/pure/" class="pure-menu-link">GitHub</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
